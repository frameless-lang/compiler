import /vendor/strictly/prelude/src/index.js (fetchText)

data = /id ->
	\result <- fetchText("/api/${id}");
	{
		init = match result
					case /Pending -> Pending
					case /Done(Ok(response)) -> Result(response)
					case /Done(error@Error(_)) -> error
		reducer = /state, action -> state
	}

main = /props ->
	if props.load then
		\[dataState, _] <- model(data(props.id));
		match dataState
			case /Pending ->
				"Loading..."
			case /Result( content ) ->
				"${content}"
			case /Error( _ ) ->
				"could not load"
	else
		"not to be loaded"
